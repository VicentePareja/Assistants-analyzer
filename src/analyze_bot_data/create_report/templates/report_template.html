<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Report for {{ assistant_name }}</title>
    <style>
        /* 
         * We define all styling parameters as CSS variables for maximum flexibility.
         * These variables come from your parameters.py, passed into the template context.
         */
        :root {
            --font-family: {{ font_family }};
            --font-size: {{ font_size }};
            --text-color: {{ text_color }};

            --heading-font-size: {{ heading_font_size }};
            --subheading-font-size: {{ subheading_font_size }};

            --heading-color: {{ heading_color }};
            --subheading-color: {{ subheading_color }};

            --header-bg-color: {{ header_bg_color }};
            --header-text-color: {{ header_text_color }};

            --alt-row-bg-color: {{ alt_row_bg_color }};
            --hover-row-bg: {{ hover_row_bg }};

            --main-bg-color: {{ main_bg_color }};
            --table-shadow-color: {{ table_shadow_color }};
            --table-border-radius: {{ table_border_radius }};
            --table-border-color: {{ table_border_color }};
            --table-text-color: {{ table_text_color }};

            --container-max-width: {{ container_max_width }};
            --container-margin: {{ container_margin }};
            --container-padding: {{ container_padding }};

            --body-margin: {{ body_margin }};
            --body-padding: {{ body_padding }};

            --threshold-box-bg-color: {{ threshold_box_bg_color }};
            --threshold-box-border-color: {{ threshold_box_border_color }};
            --threshold-box-text-color: {{ threshold_box_text_color }};

            --threshold-section-bg-color: {{ threshold_section_bg_color }};
            --threshold-section-text-color: {{ threshold_section_text_color }};

            --percentage-section-bg-color: {{ percentage_section_bg_color }};
            --percentage-section-text-color: {{ percentage_section_text_color }};

            --paragraph-line-height: {{ paragraph_line_height }};
            --paragraph-margin: {{ paragraph_margin }};

            --bold-highlight-color: {{ bold_highlight_color }};
        }

        /* Global reset / basic styling */
        body {
            font-family: var(--font-family);
            font-size: var(--font-size);
            color: var(--text-color);
            background-color: var(--main-bg-color);
            margin: var(--body-margin);
            padding: var(--body-padding);
        }

        .report-container {
            max-width: var(--container-max-width);
            margin: var(--container-margin);
            padding: var(--container-padding);
        }

        h1, h2 {
            text-align: center;
            margin-bottom: 16px;
        }
        h1 {
            font-size: var(--heading-font-size);
            margin-top: 0;
            color: var(--heading-color);
        }
        h2 {
            font-size: var(--subheading-font-size);
            margin-top: 1.5em;
            color: var(--subheading-color);
        }

        p {
            margin: var(--paragraph-margin);
            line-height: var(--paragraph-line-height);
            text-align: center;
        }

        .highlight {
            font-weight: bold;
            color: var(--bold-highlight-color);
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background-color: #fff;
            color: var(--table-text-color);
            box-shadow: 0 2px 6px var(--table-shadow-color);
            border-radius: var(--table-border-radius);
            overflow: hidden;
            border: 1px solid var(--table-border-color);
        }

        thead th {
            background-color: var(--header-bg-color);
            color: var(--header-text-color);
            font-weight: bold;
            padding: 12px 8px;
            text-align: center;
            vertical-align: middle;
        }

        tbody td {
            padding: 12px 8px;
            text-align: center;
            vertical-align: middle;
        }

        tbody tr:nth-child(odd) {
            background-color: var(--alt-row-bg-color);
        }

        tbody tr:hover {
            background-color: var(--hover-row-bg);
        }

        /* Threshold Box */
        .threshold-box {
            background-color: var(--threshold-box-bg-color);
            padding: 20px;
            border: 1px solid var(--threshold-box-border-color);
            border-radius: 10px;
            text-align: center;
            margin: 20px auto;
            max-width: 400px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            color: var(--threshold-box-text-color);
        }

        .threshold-section {
            background-color: var(--threshold-section-bg-color);
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
            font-size: 1.1em;
            font-weight: bold;
            color: var(--threshold-section-text-color);
        }

        .percentage-section {
            background-color: var(--percentage-section-bg-color);
            padding: 15px;
            border: 1px solid var(--threshold-box-border-color);
            border-radius: 8px;
            font-size: 1.2em;
            font-weight: bold;
            color: var(--percentage-section-text-color);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body>
    <div class="report-container">
        <h1>Report for {{ assistant_name }}</h1>

        {% if single_summary_columns %}
        <h2>Single Assessment Summary</h2>
        <table class="single-summary-table">
            <thead>
                <tr>
                {% for col in single_summary_columns %}
                    <th>{{ col }}</th>
                {% endfor %}
                </tr>
            </thead>
            <tbody>
            {% for row in single_summary_rows %}
                <tr>
                {% for col in single_summary_columns %}
                    <td>{{ row[col] }}</td>
                {% endfor %}
                </tr>
            {% endfor %}
            </tbody>
        </table>
        {% endif %}

        {% if worst_summary_columns %}
        <h2>Worst-of-4 Summary</h2>
        <table class="worst-summary-table">
            <thead>
                <tr>
                {% for col in worst_summary_columns %}
                    <th>{{ col }}</th>
                {% endfor %}
                </tr>
            </thead>
            <tbody>
            {% for row in worst_summary_rows %}
                <tr>
                {% for col in worst_summary_columns %}
                    <td>{{ row[col] }}</td>
                {% endfor %}
                </tr>
            {% endfor %}
            </tbody>
        </table>
        {% endif %}

        <h2>Threshold & Percentage Above Threshold</h2>
        <div class="threshold-box">
            <div class="threshold-section">
                Threshold: {{ threshold }}
            </div>
            <div class="percentage-section">
                Percentage Above Threshold: {{ percentage_worst_of_4_above_threshold }}%
            </div>
        </div>

        {% if worst_of_4_below_threshold_columns %}
        <h2>Worst-of-4 Below Threshold</h2>
        <table class="worst-below-threshold-table">
            <thead>
                <tr>
                {% for col in worst_of_4_below_threshold_columns %}
                    <th>{{ col }}</th>
                {% endfor %}
                </tr>
            </thead>
            <tbody>
            {% for row in worst_of_4_below_threshold_rows %}
                <tr>
                {% for col in worst_of_4_below_threshold_columns %}
                    <td>{{ row[col] }}</td>
                {% endfor %}
                </tr>
            {% endfor %}
            </tbody>
        </table>
        {% endif %}
    </div>
</body>
</html>
