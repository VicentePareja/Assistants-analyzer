2. repair the pbar.
3. Improve performance with threads.